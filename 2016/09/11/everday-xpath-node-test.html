<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<title>Everday XPath - Node Test</title>
<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Everday XPath - Node Test - Liang Zan - Blog</title>
<meta property="og:title" content="Everday XPath - Node Test" />
<meta name="description" content="This blog post is part of a series on XPath. The content comes from my ebook EverydayXPath. Part of the content from the book will be released to the public as blog posts. In this post, we learn about the only mandatory part of the XPath expression: Node Test." />
<meta property="og:description" content="This blog post is part of a series on XPath. The content comes from my ebook EverydayXPath. Part of the content from the book will be released to the public as blog posts. In this post, we learn about the only mandatory part of the XPath expression: Node Test." />
<link rel="canonical" href="http://localhost:4000/2016/09/11/everday-xpath-node-test.html" />
<meta property="og:url" content="http://localhost:4000/2016/09/11/everday-xpath-node-test.html" />
<meta property="og:site_name" content="Liang Zan - Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-09-11T06:11:00+08:00" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Everday XPath - Node Test",
"datePublished": "2016-09-11T06:11:00+08:00",
"description": "This blog post is part of a series on XPath. The content comes from my ebook EverydayXPath. Part of the content from the book will be released to the public as blog posts. In this post, we learn about the only mandatory part of the XPath expression: Node Test.",
"url": "http://localhost:4000/2016/09/11/everday-xpath-node-test.html"}</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
	<main class="container">
		<section class="about">
			<img src="/assets/portfolio.png" alt="Wong Liang Zan">
			<h2>Wong Liang Zan</h2>
			<p class="tagline"></p>
			<ul class="social"><a href="https://github.com/liangzan"><li><i class="icon-github-circled"></i></li></a><a href="https://www.linkedin.com/in/liangzan"><li><i class="icon-linkedin-squared"></i></li></a><a href="https://twitter.com/liangzan"><li><i class="icon-twitter-squared"></i></li></a></ul>
			<p>&copy; 2020</p>
		</section>
		<section class="content">
			<div class="post-container">
  <a class="post-link" href="/2016/09/11/everday-xpath-node-test.html">
    <h2 class="post-title">Everday XPath - Node Test</h2>
  </a>
  <div class="post-meta">
    <ul class="post-categories"></ul>
    <div class="post-date"><i class="icon-calendar"></i>Sep 11, 2016</div>
  </div>
  <div class="post">
    <p>This blog post is part of a series on XPath. The content comes from my ebook <a href="http://www.everydayxpath.com">EverydayXPath</a>. Part of the content from the book will be released to the public as blog posts. In this post, we learn about the only mandatory part of the XPath expression: Node Test.</p>

<!-- more -->

<h2 id="node-test">Node Test</h2>

<p>The node test is used as a filter to select the nodes we want. It is the only mandatory part in a XPath expression. We break a node test into 3 types.</p>

<ul>
  <li>
    <p><strong>Name test</strong>: It makes use of the inherent properties of a node to select it. Properties such as the type of the node.</p>
  </li>
  <li>
    <p><strong>Node type test</strong>: Nodes can be generalized as a comment node, a text node, a processing instruction node or a catchall node type. The node type tests helps to filter along these lines.</p>
  </li>
  <li>
    <p><strong>Targeted processing instruction test</strong>: This test selects processing instruction nodes with a defined type.</p>
  </li>
</ul>

<p>For the following examples, we would use the below as the reference document.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;table&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"odd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"even"</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"odd"</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"even"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>Delta<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"odd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<h2 id="name-test">Name Test</h2>

<p>The name test filter makes use of properties of the nodes.</p>

<h3 id="asterisk-">Asterisk <code class="highlighter-rouge">*</code></h3>

<p>The asterisk or the glob, selects everything.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/table/tr/td/*
</code></pre></div></div>

<p>This expression selects all the nodes that come after the <code class="highlighter-rouge">td</code> nodes of the root level <code class="highlighter-rouge">table</code> node. It then selects the inner <code class="highlighter-rouge">table</code> as it came after the <code class="highlighter-rouge">td</code> nodes.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<h3 id="qname">QName</h3>

<p>When we want to select something more specific, we use the <em>QName</em>. QName stands for qualified name and can be either a prefixed name or an unprefixed name.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>QName = PrefixedName | UnprefixedName
</code></pre></div></div>

<p>A prefixed name is made up of 2 parts: a prefix and a localpart separated by a colon. The prefix is a name space prefix and is optional.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PrefixedName = Prefix ':' LocalPart
</code></pre></div></div>

<p>The unprefixed name and local part resolves to become a <em>NCName</em> which stands for non-colonized name: name without colons.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UnprefixedName = LocalPart
Prefix = NCName
LocalPart = NCName
</code></pre></div></div>

<p><code class="highlighter-rouge">td</code> in the following expression below is a <em>NCName</em>. It means to select elements of the <code class="highlighter-rouge">td</code> type.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//td
</code></pre></div></div>

<p>The results returns a list of 7 <code class="highlighter-rouge">td</code> nodes.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;1&gt;</span>
<span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;2&gt;</span>
<span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;3&gt;</span>
<span class="nt">&lt;td&gt;</span>Delta<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;4&gt;</span>
<span class="nt">&lt;td&gt;</span> <span class="nt">&lt;5&gt;</span>
  <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;6&gt;</span>
<span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;7&gt;</span>
</code></pre></div></div>

<h2 id="node-type-test">Node Type Test</h2>

<p>There are times when you need a broader selection than a <em>NCName</em> and narrower than a <em>glob</em>. In such cases, there are 4 kinds of node types test which you can make use of.</p>

<ul>
  <li><strong>comment()</strong>: Selects comment nodes.</li>
  <li><strong>node()</strong>: Selects all nodes irregardless of type.</li>
  <li><strong>text()</strong>: Selects the text from the current context.</li>
  <li><strong>processing-instruction()</strong>: Selects the processing instruction nodes.</li>
</ul>

<p>For the following examples, we would use the below as the reference document.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;table&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"odd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"foo.jpg"</span><span class="nt">&gt;&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"even"</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"odd"</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"even"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- &lt;td&gt;Delta&lt;/td&gt; --&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr</span> <span class="na">class=</span><span class="s">"odd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="c">&lt;!-- &lt;td&gt;Echo&lt;/td&gt; --&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<h3 id="comment">comment()</h3>

<p>Selects comment nodes from the current context.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//tr[@class="even"]/comment()
</code></pre></div></div>

<p>This expression selects the comment nodes from the context of the <code class="highlighter-rouge">tr</code> node with a class with value <em>even</em>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- &lt;td&gt;Delta&lt;/td&gt; --&gt;</span>
</code></pre></div></div>

<h3 id="node">node()</h3>

<p>Selects all nodes irregardless of type, It even includes comment and processing instruction nodes.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//tr[@class="even"]/node()
</code></pre></div></div>

<p>This expression selects all the nodes from the context of the <code class="highlighter-rouge">tr</code> node with a class with value <em>even</em>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;1&gt;</span>
<span class="c">&lt;!-- &lt;td&gt;Delta&lt;/td&gt; --&gt;</span> <span class="nt">&lt;2&gt;</span>
</code></pre></div></div>

<p>Compare this to the <em>glob</em>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//tr[@class="even"]/*
</code></pre></div></div>

<p><em>node()</em> captures everything, even more than the <em>glob</em>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
</code></pre></div></div>

<h3 id="text">text()</h3>

<p>Selects the text from the current context.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//td/text()
</code></pre></div></div>

<p>This expression selects the inner text from the nodes selected. Notice that it returns an empty string if the context does not contain any text.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'Alpha' <span class="nt">&lt;1&gt;</span>
'Bravo' <span class="nt">&lt;2&gt;</span>
'Charlie' <span class="nt">&lt;3&gt;</span>
'' <span class="nt">&lt;4&gt;</span>
'Foxtrot' <span class="nt">&lt;5&gt;</span>
'' <span class="nt">&lt;7&gt;</span>
</code></pre></div></div>

<h3 id="processing-instruction">processing-instruction()</h3>

<p>Selects the processing instruction nodes. Processing instruction nodes are usually found in XML documents. It usually carries meta information for applications. An example of a processing instruction node is below:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml-stylesheet type="text/xsl" href="style.xsl"?&gt;</span>
</code></pre></div></div>

<p>It can be targeted. The example below selects only processing instructions with the target “xml-stylesheet”</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>processing-instruction("xml-stylesheet")
</code></pre></div></div>

  </div></div>

		</section>
	</main></body>
</html>
