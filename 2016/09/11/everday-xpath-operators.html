<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/assets/css/style.css">
<title>Everday XPath - Operators</title>
<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Everday XPath - Operators - Liang Zan - Blog</title>
<meta property="og:title" content="Everday XPath - Operators" />
<meta name="description" content="This blog post is part of a series on XPath. The content comes from my ebook EverydayXPath. Part of the content from the book will be released to the public as blog posts. In this post, we explain what XPath does. We disect the components of an XPath expression. And why the context is the key to forming the expression." />
<meta property="og:description" content="This blog post is part of a series on XPath. The content comes from my ebook EverydayXPath. Part of the content from the book will be released to the public as blog posts. In this post, we explain what XPath does. We disect the components of an XPath expression. And why the context is the key to forming the expression." />
<link rel="canonical" href="http://localhost:4000/2016/09/11/everday-xpath-operators.html" />
<meta property="og:url" content="http://localhost:4000/2016/09/11/everday-xpath-operators.html" />
<meta property="og:site_name" content="Liang Zan - Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-09-11T06:28:00+08:00" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Everday XPath - Operators",
"datePublished": "2016-09-11T06:28:00+08:00",
"description": "This blog post is part of a series on XPath. The content comes from my ebook EverydayXPath. Part of the content from the book will be released to the public as blog posts. In this post, we explain what XPath does. We disect the components of an XPath expression. And why the context is the key to forming the expression.",
"url": "http://localhost:4000/2016/09/11/everday-xpath-operators.html"}</script>
<!-- End Jekyll SEO tag -->
</head>
<body>
	<main class="container">
		<section class="about">
			<img src="/assets/portfolio.png" alt="Wong Liang Zan">
			<h2>Wong Liang Zan</h2>
			<p class="tagline"></p>
			<ul class="social"><a href="https://github.com/liangzan"><li><i class="icon-github-circled"></i></li></a><a href="https://www.linkedin.com/in/liangzan"><li><i class="icon-linkedin-squared"></i></li></a><a href="https://twitter.com/liangzan"><li><i class="icon-twitter-squared"></i></li></a></ul>
			<p>&copy; 2020</p>
		</section>
		<section class="content">
			<div class="post-container">
  <a class="post-link" href="/2016/09/11/everday-xpath-operators.html">
    <h2 class="post-title">Everday XPath - Operators</h2>
  </a>
  <div class="post-meta">
    <ul class="post-categories"></ul>
    <div class="post-date"><i class="icon-calendar"></i>Sep 11, 2016</div>
  </div>
  <div class="post">
    <p>This blog post is part of a series on XPath. The content comes from my ebook <a href="http://www.everydayxpath.com">EverydayXPath</a>. Part of the content from the book will be released to the public as blog posts. In this post, we explain what XPath does. We disect the components of an XPath expression. And why the context is the key to forming the expression.</p>

<!-- more -->

<h2 id="operators">Operators</h2>

<p>Operators are special characters that has special meaning in a XPath expression.</p>

<ul>
  <li><strong>Child</strong> <code class="highlighter-rouge">/</code>: Selects the children of the current context. When used at the beginning of the expression, it starts from the root node.</li>
  <li><strong>Recursive descent</strong> <code class="highlighter-rouge">//</code>: Searches the document, descending from the current context. When used at the beginning of the expression, it searches the entire document from the root node.</li>
  <li><strong>Dot</strong> <code class="highlighter-rouge">.</code>: Selects the current context. By default it takes the root node as the current context.</li>
  <li><strong>Double dot</strong> <code class="highlighter-rouge">..</code>: Selects the parent of the current context.</li>
  <li><strong>Wildcard</strong> <code class="highlighter-rouge">*</code>: Selecta all nodes from the current context.</li>
  <li><strong>Attribute</strong> <code class="highlighter-rouge">@</code>: Selects the node with the attribute and returns the attribute.</li>
  <li><strong>Attribute wildcard</strong> <code class="highlighter-rouge">@*</code>: Selects nodes with any attributes and returns the attributes.</li>
  <li><strong>Round brackets</strong> <code class="highlighter-rouge">()</code>: Expressions within round brackets takes precedence in the evaluation order.</li>
  <li><strong>Square brackets</strong> <code class="highlighter-rouge">[]</code>: Used both as a subscript operator and to encapsulate a filter expression.</li>
  <li><strong>Addition</strong> <code class="highlighter-rouge">+</code>: Performs addition.</li>
  <li><strong>Subtraction</strong> <code class="highlighter-rouge">-</code>: Performs subtraction.</li>
  <li><strong>Division</strong> <code class="highlighter-rouge">div</code>: Performs division.</li>
  <li><strong>Multiplication</strong> <code class="highlighter-rouge">*</code>: Performs multiplication.</li>
  <li><strong>Modulo</strong> <code class="highlighter-rouge">mod</code>: Performs modulo</li>
</ul>

<p>For the following examples, we would use the below as the reference document.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"active"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Delta<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<h3 id="child-operator-">Child operator <code class="highlighter-rouge">/</code></h3>

<p>The child operator selects the children of the current context. When used at the beginning of the expression, it starts from the root node.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/table
</code></pre></div></div>

<p>This expression selects the <code class="highlighter-rouge">table</code> node starting from the root.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"active"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>Delta<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;tr&gt;</span>
    <span class="nt">&lt;td&gt;</span>
      <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/table/tr/td
</code></pre></div></div>

<p>This expression selects all the <code class="highlighter-rouge">td</code> nodes who are children of <code class="highlighter-rouge">tr</code> nodes who are children of the <code class="highlighter-rouge">table</code> node. Notice that it does not select the <code class="highlighter-rouge">td</code> nodes in the inner <code class="highlighter-rouge">table</code>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;1&gt;</span>
<span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;2&gt;</span>
<span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;3&gt;</span>
<span class="nt">&lt;td&gt;</span>Delta<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;4&gt;</span>
<span class="nt">&lt;td&gt;</span> <span class="nt">&lt;5&gt;</span>
  <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/td&gt;</span>
</code></pre></div></div>

<h3 id="recursive-descent-">Recursive descent <code class="highlighter-rouge">//</code></h3>

<p>The recursive descent operator searches the document, descending from the current context. When used at the beginning of the expression, it searches the entire document from the root node.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//td
</code></pre></div></div>

<p>This expression selects all the <code class="highlighter-rouge">td</code> nodes. Notice that it selects all the <code class="highlighter-rouge">td</code> nodes regardless of their parents.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;1&gt;</span>
<span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;2&gt;</span>
<span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;3&gt;</span>
<span class="nt">&lt;td&gt;</span>Delta<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;4&gt;</span>
<span class="nt">&lt;td&gt;</span> <span class="nt">&lt;5&gt;</span>
  <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/td&gt;</span>'
<span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;6&gt;</span>
<span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;7&gt;</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/table/tr/td//td
</code></pre></div></div>

<p>This expression selects all <code class="highlighter-rouge">td</code> nodes descending from the context of the <code class="highlighter-rouge">td</code> node of the root <code class="highlighter-rouge">table</code>. Notice that the first level <code class="highlighter-rouge">td</code> nodes are not selected.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;1&gt;</span>
<span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;2&gt;</span>
</code></pre></div></div>

<h3 id="dot-operator-">Dot operator <code class="highlighter-rouge">.</code></h3>

<p>The dot operator selects the current context. By default it takes the root node as the current context.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//td[.="Bravo"]
</code></pre></div></div>

<p>This expression selects the <code class="highlighter-rouge">td</code> node whose value is <code class="highlighter-rouge">Bravo</code>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
</code></pre></div></div>

<h3 id="double-dot-operator-">Double dot operator <code class="highlighter-rouge">..</code></h3>

<p>The double dot operator selects the parent of the current context.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/table/tr/td/..
</code></pre></div></div>

<p>This expression selects the parent node of the <code class="highlighter-rouge">td</code> nodes.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;tr&gt;</span> <span class="nt">&lt;1&gt;</span>
  <span class="nt">&lt;td&gt;</span>Alpha<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;tr&gt;</span> <span class="nt">&lt;2&gt;</span>
  <span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;tr&gt;</span> <span class="nt">&lt;3&gt;</span>
  <span class="nt">&lt;td&gt;</span>Charlie<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;tr&gt;</span> <span class="nt">&lt;4&gt;</span>
  <span class="nt">&lt;td&gt;</span>Delta<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;tr&gt;</span> <span class="nt">&lt;5&gt;</span>
  <span class="nt">&lt;td&gt;</span>
    <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
</code></pre></div></div>

<h3 id="wildcard-operator-">Wildcard operator <code class="highlighter-rouge">*</code></h3>

<p>The wildcard operator selects all nodes from the current context.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/table/tr/td/table/*/td
</code></pre></div></div>

<p>This expression selects all <code class="highlighter-rouge">td</code> nodes from the inner <code class="highlighter-rouge">table</code>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;1&gt;</span>
<span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span> <span class="nt">&lt;2&gt;</span>
</code></pre></div></div>

<h3 id="attribute-operator-">Attribute operator <code class="highlighter-rouge">@</code></h3>

<p>The attribute operator selects the node with the attribute and returns the attribute.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//table/@style
</code></pre></div></div>

<p>This expression selects the <code class="highlighter-rouge">table</code> with the <code class="highlighter-rouge">style</code> attribute and returns the <code class="highlighter-rouge">style</code> attribute.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>style="margin: 12px"
</code></pre></div></div>

<h3 id="attribute-wildcard-operator-">Attribute wildcard operator <code class="highlighter-rouge">@*</code></h3>

<p>The attribute wildcard operator selects nodes with any attributes and returns the attributes.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//@*
</code></pre></div></div>

<p>This expression selects all the attributes found in any of the nodes.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class="active" <span class="nt">&lt;1&gt;</span>
style="margin: 12px" <span class="nt">&lt;2&gt;</span>
</code></pre></div></div>

<h3 id="round-brackets-operator-">Round brackets operator <code class="highlighter-rouge">()</code></h3>

<p>Expressions within round brackets takes precedence in the evaluation order.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(//@*)[1]
</code></pre></div></div>

<p>The expression within the round brackets is evaluated first, and the first result is returned by the subscript operator.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class="active"
</code></pre></div></div>

<h3 id="square-brackets-operator-">Square brackets operator <code class="highlighter-rouge">[]</code></h3>

<p>Square brackets are either used as a subscript operator or to encapsulate a filter expression.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(//td)[2]
</code></pre></div></div>

<p>This expression selects the second <code class="highlighter-rouge">td</code> node from the results of the expression encapsulated in the round brackets operator.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
</code></pre></div></div>

<p>Here is another example as a subscript operator</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/table/tr[2]
</code></pre></div></div>

<p>This expression selects the second <code class="highlighter-rouge">tr</code> node which is a child of the <code class="highlighter-rouge">table</code> node.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;tr&gt;</span>
  <span class="nt">&lt;td&gt;</span>Bravo<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
</code></pre></div></div>

<p>The following example shows the square brackets operator encapsulating a filter expression.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(//td)[last()]
</code></pre></div></div>

<p>This expression selects the last node from the results of the expression in the round brackets operator.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
</code></pre></div></div>

<p>Here is another example of encapsulating a filter expression.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//td[table]
</code></pre></div></div>

<p>This expression selects the <code class="highlighter-rouge">td</code> node which contains a <code class="highlighter-rouge">table</code> node.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;td&gt;</span>
  <span class="nt">&lt;table</span> <span class="na">style=</span><span class="s">"margin: 12px"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Echo<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td&gt;</span>Foxtrot<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/td&gt;</span>
</code></pre></div></div>

<h3 id="arithmetic-operators-----div-mod">Arithmetic operators <code class="highlighter-rouge">+ - * div mod</code></h3>

<p>The arithmetic operators evaluates expressions to return numerical results.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>count(//td) + count(//table)
</code></pre></div></div>

<p>The <code class="highlighter-rouge">count</code> function returns the number of nodes returned from evaluating the expression. There are 7 <code class="highlighter-rouge">td</code> nodes and 2 <code class="highlighter-rouge">table</code> nodes which when added, returns 9.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>9.0
</code></pre></div></div>

  </div></div>

		</section>
	</main></body>
</html>
